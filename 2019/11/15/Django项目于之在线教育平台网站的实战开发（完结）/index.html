<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Django项目于之在线教育平台网站的实战开发（完结） | TG&#39;S BLOG</title>
  
  
  <meta name="description" content="该篇文章是博主一字一码编写的，实属不易，请尊重原创，谢谢大家！">
  

  

  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.10.1/css/all.min.css">
  

  
  <link rel="shortcut icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.3/images/favicon.ico">
  

  
    <link rel="stylesheet" href="/style.css">
  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  
  <div class="cover-wrapper">
    <cover class='cover post half'>
      
        
  <img class='logo' src='https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.5.6/images/logo_2.png'/>


  <div class="m_search">
    <form name="searchform" class="form u-search-form">
      <input type="text" class="input u-search-input" placeholder="" />
      <i class="icon fas fa-search fa-fw"></i>
    </form>
  </div>

<div class='menu navgation'>
  <ul class='h-list'>
    
      
        <li>
          <a class="nav home" href="/"
            
            
            id="home">
            <i class='fas fa-home fa-fw'></i>&nbsp;主页
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/categories/"
            
            
            id="categories">
            <i class='fas fa-folder-open fa-fw'></i>&nbsp;分类
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/tags/"
            
              rel="nofollow"
            
            
            id="tags">
            <i class='fas fa-tags fa-fw'></i>&nbsp;标签
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/love/"
            
              rel="nofollow"
            
            
            id="love">
            <i class='fas fa-heart fa-fw'></i>&nbsp;记录
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/about/"
            
              rel="nofollow"
            
            
            id="about">
            <i class='fas fa-info-circle fa-fw'></i>&nbsp;关于
          </a>
        </li>
      
    
  </ul>
</div>

      
    </cover>
    <header class="l_header pure">
  <div id="loading-bar-wrapper">
    <div id="loading-bar" class="pure"></div>
  </div>

	<div class='wrapper'>
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href='/' >
        
          TG'S BLOG
        
      </a>
			<div class='menu navgation'>
				<ul class='h-list'>
          
  					
  						<li>
								<a class="nav flat-box" href="/"
                  
                  
                  id="home">
									<i class='fas fa-home fa-fw'></i>&nbsp;主页
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/categories/"
                  
                    rel="nofollow"
                  
                  
                  id="categories">
									<i class='fas fa-folder-open fa-fw'></i>&nbsp;分类
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/tags/"
                  
                    rel="nofollow"
                  
                  
                  id="tags">
									<i class='fas fa-tags fa-fw'></i>&nbsp;标签
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/archives/"
                  
                    rel="nofollow"
                  
                  
                  id="archives">
									<i class='fas fa-archive fa-fw'></i>&nbsp;归档
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/love/"
                  
                    rel="nofollow"
                  
                  
                  id="love">
									<i class='fas fa-heart fa-fw'></i>&nbsp;记录
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/about/"
                  
                    rel="nofollow"
                  
                  
                  id="about">
									<i class='fas fa-info-circle fa-fw'></i>&nbsp;关于
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="搜索" />
						<i class="icon fas fa-search fa-fw"></i>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a class="fas fa-search fa-fw" href='javascript:void(0)'></a></li>
				
				<li class='s-menu'><a class="fas fa-bars fa-fw" href='javascript:void(0)'></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo flat-box"></a>
			<ul class='switcher h-list'>
				<li class='s-comment'><a class="flat-btn fas fa-comments fa-fw" href='javascript:void(0)'></a></li>
        
          <li class='s-toc'><a class="flat-btn fas fa-list fa-fw" href='javascript:void(0)'></a></li>
        
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu navgation">
      <ul>
        
          
            <li>
							<a class="nav flat-box" href="/"
                
                
                id="home">
								<i class='fas fa-clock fa-fw'></i>&nbsp;近期文章
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/blog/archives/"
                
                  rel="nofollow"
                
                
                id="blogarchives">
								<i class='fas fa-archive fa-fw'></i>&nbsp;文章归档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/projects/"
                
                
                id="projects">
								<i class='fas fa-code-branch fa-fw'></i>&nbsp;开源项目
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/friends/"
                
                  rel="nofollow"
                
                
                id="friends">
								<i class='fas fa-link fa-fw'></i>&nbsp;我的友链
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="https://xaoxuu.com/wiki/material-x/"
                
                  rel="nofollow"
                
                
                id="https:xaoxuu.comwikimaterial-x">
								<i class='fas fa-book fa-fw'></i>&nbsp;主题文档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/about/"
                
                  rel="nofollow"
                
                
                id="about">
								<i class='fas fa-info-circle fa-fw'></i>&nbsp;关于小站
							</a>
            </li>
          
       
      </ul>
		</nav>
    </header>
	</aside>
<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      <div class='l_main'>
  

  <article id="post" class="post white-box article-type-post" itemscope itemprop="blogPost">
    


  <section class='meta'>
    
    
      <a title='Django项目于之在线教育平台网站的实战开发（完结）' href='/2019/11/15/Django项目于之在线教育平台网站的实战开发（完结）/'><img class='thumbnail' src='https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.6.5/images/django.png'></a>
    
    <div class="meta" id="header-meta">
      
        
  
    <h1 class="title">
      <a href="/2019/11/15/Django项目于之在线教育平台网站的实战开发（完结）/">
        Django项目于之在线教育平台网站的实战开发（完结）
      </a>
    </h1>
  


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    
      <a href="/" rel="nofollow">
        
          <img src="https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.4.3/images/avatar_4.png">
        
        <p>cdtaogang</p>
      </a>
    
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
    <p>2019-11-15</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/categories/Django开发/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Django开发</p>
    </a>
  </div>


          
        
          
            
  
    <div class="new-meta-item browse busuanzi">
      <a class='notlink'>
        <i class="fas fa-eye" aria-hidden="true"></i>
        <p>
          <span id="busuanzi_value_page_pv">
            <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>
          </span>
        </p>
      </a>
    </div>
  


          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


    <section class="article typo">
      <div class="article-entry" itemprop="articleBody">
        <p>该篇文章是博主一字一码编写的，实属不易，请尊重原创，谢谢大家！<br><font style="color:red">温馨提示：需要项目源码的朋友，请添加博主微信进行获取！</font></p>
<div style="color:#fb651b"><i class="fas fa-list fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;本文目录</div>
<li class="toc-item toc-level-1"><a style=" text-decoration:none;" href="#一丶常见web攻击及防范"><span style="color:#4ea1db">一丶常见web攻击及防范</span></a></li>
<li class="toc-item toc-level-1"><a style=" text-decoration:none;" href="#二丶Xadmin多种配置"><span style="color:#4ea1db">二丶Xadmin多种配置</span></a></li>
<li class="toc-item toc-level-1"><a style=" text-decoration:none;" href="#三丶Xadmin插件开发（富文本编辑器）"><span style="color:#4ea1db">三丶Xadmin插件开发（富文本编辑器）</span></a></li>
<li class="toc-item toc-level-1"><a style=" text-decoration:none;" href="#四丶Xadmin插件开发（导出excel）"><span style="color:#4ea1db">四丶Xadmin插件开发（导出excel）</span></a></li>
<li class="toc-item toc-level-1"><a style=" text-decoration:none;" href="#五丶项目部署上线"><span style="color:#4ea1db">五丶项目部署上线</span></a></li>
<li class="toc-item toc-level-1"><a style=" text-decoration:none;" href="#六丶项目总结"><span style="color:#4ea1db">六丶项目总结</span></a></li>
<a id="more"></a>

<h1 id="一丶常见web攻击及防范"><a href="#一丶常见web攻击及防范" class="headerlink" title="一丶常见web攻击及防范"></a>一丶常见web攻击及防范</h1><p><strong>1.</strong>sql注入攻击与防范</p>
<p>① sql注入的危害</p>
<ul>
<li>非法读取丶篡改丶删除数据库中的数据</li>
<li>盗取用户的各类敏感信息，获取利益</li>
<li>通过修改数据库来修改网页上的内容</li>
<li>注入木马等</li>
</ul>
<p>② sql注入登录演示</p>
<ul>
<li>定义原始方法登录视图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sql注入登录演示</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnsafeLoginView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="string">"""不安全登录,使用最原始的方法进行登录"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">"login.html"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        user_name = request.POST.get(<span class="string">"username"</span>, <span class="string">""</span>)</span><br><span class="line">        pass_word = request.POST.get(<span class="string">"password"</span>, <span class="string">""</span>)</span><br><span class="line">        <span class="keyword">import</span> MySQLdb</span><br><span class="line">        conn = MySQLdb.connect(host=<span class="string">"127.0.0.1"</span>, user=<span class="string">"root"</span>, passwd=<span class="string">"mysql"</span>, db=<span class="string">"mxonline"</span>, charset=<span class="string">"utf8"</span>)</span><br><span class="line">        cursor = conn.cursor()</span><br><span class="line">        sql = <span class="string">"select * from  users_userprofile where username = '&#123;0&#125;' and password = '&#123;1&#125;' "</span>.format(user_name, pass_word)</span><br><span class="line">        res = cursor.execute(sql)</span><br><span class="line">        <span class="comment"># 获取用户所有数据</span></span><br><span class="line">        all_users = cursor.fetchall()</span><br></pre></td></tr></table></figure>

<ul>
<li>在根级urls中修改登录视图为上一步定义的视图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r'^login/$'</span>, UnsafeLoginView.as_view(), name=<span class="string">"login"</span>),  <span class="comment"># 登录页</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Debug测试输入不存在的用户名和密码，res变量的值为0，表示未查询到结果</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190515204301676.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在登录页面，输入特殊的用户名，密码随便输入，如下图所示</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019051520460357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>Debug测试的结果是，居然查询到了数据，原因是1=1此条件为真所以肯定能查询到数据</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190515205052355.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>使用以上的sql语句在数据库进行查询，同样也能查询到数据</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190515210440435.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>2.</strong>xss攻击原理及防范</p>
<p>① xss跨站脚本攻击(Cross Site Scripting)的危害</p>
<ul>
<li>盗取各类用户账号，如用户网银账号丶各类管理员账号</li>
<li>盗窃企业重要的具有商业价值的资料</li>
<li>非法转账</li>
<li>控制受害者机器向其他网站发起攻击丶注入木马等</li>
</ul>
<p>② xss攻击原理</p>
<ul>
<li>服务器对用户发送的请求地址中的name属性的值，直接做回显，并没有做任何加密处理，当黑客将请求地址中的name属性的值修改成一段js脚本，比如下图所示的获取cookie并进行alert打印，那么就会获取到用户的保存在本地的cookie</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019051609305013.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p>③ xss攻击流程图 </p>
<ul>
<li>以下的js脚本只是其中的一种而已，而黑客是怎么将url发送给受害者的比如邮件，QQ等等</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516093648942.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p>④ xss攻击防范</p>
<ul>
<li>首先代码里对用户输入的地方和变量都需要仔细检查长度和对(“ &lt;” &gt;” ; ‘)等字符做过滤</li>
<li>避免直接在cookie中泄露用户隐私，例如email丶密码等等</li>
<li>通过使cookie和系统ip进行绑定来降低cookie泄露后的危险</li>
<li>尽量采用POST进行表单提交而不使用GET（也就是请求地址中不出现参数）</li>
</ul>
<p><strong>3.</strong>csrf攻击与防范</p>
<p>① csrf跨站请求伪造(Cross-site request forgery)的危害</p>
<ul>
<li>以你的名义进行邮件发送</li>
<li>盗取你的账号</li>
<li>购买商品</li>
<li>虚拟货币转账</li>
</ul>
<p>② csrf攻击原理</p>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516103625603.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p>③ csrf防范</p>
<ul>
<li>表单提交时加上打印出csrf_token的值即可对跨站攻击进行有效的防范{% csrf_token %}</li>
</ul>
<h1 id="二丶Xadmin多种配置"><a href="#二丶Xadmin多种配置" class="headerlink" title="二丶Xadmin多种配置"></a>二丶Xadmin多种配置</h1><p><strong>1.</strong>导航栏icon的修改</p>
<ul>
<li>首先登陆<a href="http://fontawesome.dashgame.com/" target="_blank" rel="noopener">Font Awesome</a>官网，下载最新版本图标字体库以及CSS框架</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516112741369.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在xadmin源码中查看当前使用的font-awesome的版本为4.0.3</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516113325879.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>将下载好的font-awesome-4.7.0进行解压后，替换编辑器源码中的font-awesome目录文件</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516113640176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在xadmin后端页面中左侧导航栏，修改用户心下的邮箱验证码图标</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019051611541422.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在xadmin源码中auth.py模块中找到UserAdmin模型类中的图标属性变量为model_icon</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516114037847.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>即在users/adminx中找到邮箱验证码的EmailVerifyRecordAdmin类，在类中添加model_icon属性，具体需要改成什么样的图标，需要在官网上找到要修改图片样式，如下图所示</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516120246589.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>然后紧接着在EmailVerifyRecordAdmin邮箱验证码注册类中执行model_icon属性为上图的样式</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516120408721.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>Ctrl+F5强制刷新xadmin后台，用户信息邮箱验证码的图标就修改成功了</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516120543846.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>2.</strong>xadmin后台表数据设定默认字段排序</p>
<ul>
<li>比如当用户点击查看课程列表时，整个列表数据是乱序的，比如点击数</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516121457155.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>想让课程列表中的数据按照点击数的倒序进行排序，就需要在对应的注册类中添加如下ordering属性即可</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CourseAdmin</span><span class="params">(object)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>, <span class="string">'click_nums'</span>]</span><br><span class="line">    search_fields = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'students'</span>]</span><br><span class="line">    list_filter = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>]</span><br><span class="line">    ordering = [<span class="string">'-click_nums'</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新页面，成功按照课程点击数倒序排列显示数据</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019051612191927.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>3.</strong>xadmin后台管理中字段设置为只读</p>
<ul>
<li>在课程数据中如点击数丶收藏认识丶学习人数应该是只读而不能进行修改编辑的</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019051612364660.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在注册类中添加readonly_fields属性指向要只读的字段</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readonly_fields = [<span class="string">'students'</span>, <span class="string">'click_nums'</span>, <span class="string">'fav_nums'</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新页面则，指定只读的字段则显示在页面底部</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516124110786.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>4.</strong>在xadmin后台中不显示某些字段</p>
<ul>
<li>在注册类中添加exclude属性的值即可，需要注意的是exclude属性与readonly_fields属性时冲突的，所以需要去除readonly_fields属性中的click_nums字段</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">readonly_fields = [<span class="string">'students'</span>, <span class="string">'fav_nums'</span>]</span><br><span class="line">exclude = [<span class="string">'click_nums'</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新页面则，不显示点击数字段</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516124611632.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>5.</strong>增加课程时修改外键选择的样式</p>
<ul>
<li>增加一门课程，需要通过下拉框来选择对应课程的机构，当数据庞大时，使用下拉框就没有搜索框来的方便</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516125132375.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在organization/adminx中找到外键所指向的注册类，在该类中设置样式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">relfield_style = &apos;fk-ajax&apos;</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新页面，在选择课程机构时则成功显示出搜索框</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516125619931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>6.</strong>inline的使用</p>
<ul>
<li>在xadmin后台管理中为课程添加章节信息时，不能在增加课程页面直接添加，而是需要退出课程到章节字段中去选择课程后才能添加课程的章节信息，在xadmin中也能像django admin那样去做到在一个页面直接添加外键的信息，在课程管理的adminx中需要定义一个类LessonInline，通过课程注册类中添加inlines的属性指向LessonInline对象即可达到效果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LessonInline</span><span class="params">(object)</span>:</span></span><br><span class="line">    model = Lesson</span><br><span class="line">    extra = <span class="number">0</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CourseAdmin</span><span class="params">(object)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>, <span class="string">'click_nums'</span>]</span><br><span class="line">    search_fields = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'students'</span>]</span><br><span class="line">    list_filter = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>]</span><br><span class="line">    ordering = [<span class="string">'-click_nums'</span>]</span><br><span class="line">    readonly_fields = [<span class="string">'students'</span>, <span class="string">'fav_nums'</span>]</span><br><span class="line">    exclude = [<span class="string">'click_nums'</span>]</span><br><span class="line">    inlines = [LessonInline]</span><br></pre></td></tr></table></figure>

<ul>
<li>刷洗页面，增加课程页面底部就会出现章节，点击+则可以添加该课程对应的章节信息，很是方便</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516130943309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>需要注意的是，inline只能完成一成嵌套，不能完成多层，比如课程—章节—视频这就没法，但一个课程对应多个外键，就可以在inlines 属性中添加多个类，因为是列表类型的变量，在课程增加页面，除了添加章节还可以添加课程资源</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class LessonInline(object):</span><br><span class="line">    model = Lesson</span><br><span class="line">    extra = 0</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">class CourseResourceInline(object):</span><br><span class="line">    model = CourseResource</span><br><span class="line">    extra = 0</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">class CourseAdmin(object):</span><br><span class="line">    list_display = [&apos;name&apos;, &apos;desc&apos;, &apos;detail&apos;, &apos;degree&apos;, &apos;learn_times&apos;, &apos;students&apos;, &apos;click_nums&apos;]</span><br><span class="line">    search_fields = [&apos;name&apos;, &apos;desc&apos;, &apos;detail&apos;, &apos;degree&apos;, &apos;students&apos;]</span><br><span class="line">    list_filter = [&apos;name&apos;, &apos;desc&apos;, &apos;detail&apos;, &apos;degree&apos;, &apos;learn_times&apos;, &apos;students&apos;]</span><br><span class="line">    ordering = [&apos;-click_nums&apos;]</span><br><span class="line">    readonly_fields = [&apos;students&apos;, &apos;fav_nums&apos;]</span><br><span class="line">    exclude = [&apos;click_nums&apos;]</span><br><span class="line">    inlines = [LessonInline, CourseResourceInline]</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新页面，在增加课程页面就可以同时添加章节信息以及课程资源数据了</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516131654870.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>7.</strong>自定义列表返回数据，同一个model注册两个管理器</p>
<ul>
<li>在之前主页动态数据展示时，因公开课程栏中嵌套了轮播图，就需要在课程所在的模型类Course添加is_banner是否轮播字段</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516150242268.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>如果想在课程管理中产生另一个表数据，这个表数据只显示轮播的课程数据那么就需要在courses/models中创建一个轮播课程模型类，这个类必须继承Course，只需要在类中编写Meta类并定义名称即可</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BannerCourse</span><span class="params">(Course)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">"轮播课程"</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">        proxy = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将上面定义的模型类，在courses/adminx中进行导入注册</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BannerCourseAdmin</span><span class="params">(object)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>, <span class="string">'click_nums'</span>]</span><br><span class="line">    search_fields = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'students'</span>]</span><br><span class="line">    list_filter = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>]</span><br><span class="line">    ordering = [<span class="string">'-click_nums'</span>]</span><br><span class="line">    readonly_fields = [<span class="string">'students'</span>, <span class="string">'fav_nums'</span>]</span><br><span class="line">    exclude = [<span class="string">'click_nums'</span>]</span><br><span class="line">    inlines = [LessonInline, CourseResourceInline]</span><br><span class="line"> </span><br><span class="line">xadmin.site.register(BannerCourse, BannerCourseAdmin)</span><br></pre></td></tr></table></figure>

<ul>
<li>强制刷新页面后，在课程管理导航栏下成功创建一个轮播课程表数据，这个数据说白了跟课程的数据一模一样只是名称变了</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516151538842.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>如何让轮播课程表中数据只显示轮播的课程，在轮播课程对应的注册类中定义一个方法，该方法用于对父类Course模型类中的is_banner字段进行过滤，将过滤后的数据进行返回即可，<font style="color:red">为什么可以对is_banner字段进行过滤，因为BannerCourseAdmin与BannerCourse进行注册关联，并且BannerCourse这个模型类又继承Course模型类，即可以对is_banner字段进行过滤处理了</font></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BannerCourseAdmin</span><span class="params">(object)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>, <span class="string">'click_nums'</span>]</span><br><span class="line">    search_fields = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'students'</span>]</span><br><span class="line">    list_filter = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>]</span><br><span class="line">    ordering = [<span class="string">'-click_nums'</span>]</span><br><span class="line">    readonly_fields = [<span class="string">'students'</span>, <span class="string">'fav_nums'</span>]</span><br><span class="line">    exclude = [<span class="string">'click_nums'</span>]</span><br><span class="line">    inlines = [LessonInline, CourseResourceInline]</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        qs = super(BannerCourseAdmin, self).queryset()</span><br><span class="line">        qs = qs.filter(is_banner=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> qs</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新页面查看轮播课程数据，则成功只显示轮播的课程数据</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516152520633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>既然在轮播课程中只显示轮播课程数据，那么在课程中也应当只显示出不轮播的课程数据，跟上面同理在CourseAdmin注册类中定义queryset方法，只需要修改父类名以及将filter方法中的条件改成False即可</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CourseAdmin</span><span class="params">(object)</span>:</span></span><br><span class="line">    list_display = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>, <span class="string">'click_nums'</span>]</span><br><span class="line">    search_fields = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'students'</span>]</span><br><span class="line">    list_filter = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>]</span><br><span class="line">    ordering = [<span class="string">'-click_nums'</span>]</span><br><span class="line">    readonly_fields = [<span class="string">'students'</span>, <span class="string">'fav_nums'</span>]</span><br><span class="line">    exclude = [<span class="string">'click_nums'</span>]</span><br><span class="line">    inlines = [LessonInline, CourseResourceInline]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        qs = super(CourseAdmin, self).queryset()</span><br><span class="line">        qs = qs.filter(is_banner=<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> qs</span><br></pre></td></tr></table></figure>

<ul>
<li>查看课程下的数据，只有13条，总共课程16条数据，轮播课程3条，所以数据筛选正确</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516153036362.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>8.</strong>list_editable属性</p>
<ul>
<li>在课程注册类CourseAdmin中添加list_editable属性，这个属性可以在列表中对设定的字段直接进行编辑，而不需要点击进入课程详情中进行编辑</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_editable = [<span class="string">'name'</span>, <span class="string">'degree'</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新课程列表页面，则指定可编辑的name字段以及degree字段则出现编辑按钮，点击按钮可直接进行编辑保存了</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516154618195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>9.</strong>在课程列表中显示对应课程的章节数</p>
<ul>
<li>之前在页面模板中为了显示课程的章节数，在Course模型类中定义了get_zj_nums方法，用于获取课程的章节数，short_description方法是用于在xadmin后台显示的字段名称</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_zj_nums</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="comment">#获取课程章节数</span></span><br><span class="line">    <span class="keyword">return</span> self.lesson_set.all().count()</span><br><span class="line">get_zj_nums.short_description = <span class="string">"章节数"</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在课程注册类CourseAdmin中list_display属性中添加该方法名，对应django来说判断该字段为方法名时，则会去调用此方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_display = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>, <span class="string">'click_nums'</span>, <span class="string">"get_zj_nums"</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>刷新课程列表页，则成功显示出课程对应的章节数</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516155353577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>10.</strong>在课程列表字段添加跳转按钮，指定跳转的链接地址</p>
<ul>
<li>在Course模型类中定义go_to方法，具体如下，说明一下make_safe方法是让链接地址安全不进行转义操作</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">go_to</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line">    <span class="keyword">return</span> mark_safe(<span class="string">"&lt;a href='http://www.baidu.com'&gt;跳转&lt;/a&gt;"</span>)</span><br><span class="line">go_to.short_description = <span class="string">"跳转"</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在注册类CourseAdmin中将以上方法名添加到list_display属性中</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list_display = [<span class="string">'name'</span>, <span class="string">'desc'</span>, <span class="string">'detail'</span>, <span class="string">'degree'</span>, <span class="string">'learn_times'</span>, <span class="string">'students'</span>, <span class="string">'click_nums'</span>, <span class="string">"get_zj_nums"</span>, <span class="string">"go_to"</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>测试显示跳转字段并进行目标地址的跳转</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516160525307.gif" alt></fancybox></p>
<p><strong>11.</strong>页面定时刷新插件</p>
<ul>
<li>xadmin提供了此功能，在RefreshPlugin类中refresh_times为空列表，表示未进行设置刷新时间</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516161807189.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在CourseAdmin中添加refresh_times属性，并设定其值为3秒或5秒刷新条件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">refresh_times = [<span class="number">3</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>测试自动刷新，选择3秒进行刷新测试，请注意链接地址的自动刷新</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516163654304.gif" alt></fancybox></p>
<p><strong>12.</strong>在保存课程的时候统计课程机构的课程数</p>
<ul>
<li>在CourseAdmin注册类中重写父类的save_models方法，当对课程进行修改或者增加时都会对数据进行保存，那么就会去调用重写的save_models方法，就可以在这个方法中查询获取对应的课程机构的课程数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_models</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="comment"># 在保存课程的时候统计课程机构的课程数</span></span><br><span class="line">    obj = self.new_obj</span><br><span class="line">    obj.save()</span><br><span class="line">    <span class="keyword">if</span> obj.course_org <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        course_org = obj.course_org</span><br><span class="line">        course_org.course_nums = Course.objects.filter(course_org=course_org).count()</span><br><span class="line">        course_org.save()</span><br></pre></td></tr></table></figure>

<ul>
<li>在课程机构中查看第一条数据同济大学的课程数，这里显示为0</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516165316557.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>Debug 断点测试，在课程中对Mysql主从复制课程所属的课程机构修改成同济大学，后点击保存</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516170535424.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>Debug断点测试完成后，查看课程机构中同济大学的课程数</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516170658990.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<h1 id="三丶Xadmin插件开发（富文本编辑器）"><a href="#三丶Xadmin插件开发（富文本编辑器）" class="headerlink" title="三丶Xadmin插件开发（富文本编辑器）"></a>三丶Xadmin插件开发（富文本编辑器）</h1><p><strong>说明：</strong> django ueditor富文本编辑器的集成</p>
<p><strong>1.</strong>Xadmin插件制作官方中文文档 <a href="https://xadmin.readthedocs.io/en/docs-chinese/make_plugin.html" target="_blank" rel="noopener">https://xadmin.readthedocs.io/en/docs-chinese/make_plugin.html</a></p>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516173843375.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>2.</strong>DjangoUeditor源码文档 <a href="https://github.com/zhangfisher/DjangoUeditor" target="_blank" rel="noopener">https://github.com/zhangfisher/DjangoUeditor</a></p>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516174316811.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>3.</strong>DjangoUeditor使用</p>
<ul>
<li>安装DjangoUeditor</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516175231995.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在INSTALL_APPS里面增加DjangoUeditor</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    .......,</span><br><span class="line">    .......,</span><br><span class="line">    &quot;pure_pagination&quot;,</span><br><span class="line">    &quot;DjangoUeditor&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>配置urls</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r'^ueditor/'</span>,include(<span class="string">'DjangoUeditor.urls'</span> )),</span><br></pre></td></tr></table></figure>

<ul>
<li>在需要使用富文本编辑器的模型类中导入UEditorField类，项目中Course模型类中的课程详情字段是需要使用富文本的，所以对detail字段进行如下修改</li>
<li>说明：UEditorField继承自models.TextField,因此你可以直接将model里面定义的models.TextField直接改成UEditorField即可</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">detail = UEditorField(verbose_name=<span class="string">u"课程详情"</span>,width=<span class="number">600</span>, height=<span class="number">300</span>, imagePath=<span class="string">"courses/ueditor/"</span>,</span><br><span class="line">                                         filePath=<span class="string">"courses/ueditor/"</span>, default=<span class="string">''</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>在xadmin/plugins目录下创建ueditor.py文件，在文件中进行如下编写</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xadmin</span><br><span class="line"><span class="keyword">from</span> xadmin.views <span class="keyword">import</span> BaseAdminPlugin, CreateAdminView, ModelFormAdminView, UpdateAdminView</span><br><span class="line"><span class="keyword">from</span> DjangoUeditor.models <span class="keyword">import</span> UEditorField</span><br><span class="line"><span class="keyword">from</span> DjangoUeditor.widgets <span class="keyword">import</span> UEditorWidget</span><br><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XadminUEditorWidget</span><span class="params">(UEditorWidget)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,**kwargs)</span>:</span></span><br><span class="line">        self.ueditor_options=kwargs</span><br><span class="line">        self.Media.js = <span class="literal">None</span></span><br><span class="line">        super(XadminUEditorWidget,self).__init__(kwargs)</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UeditorPlugin</span><span class="params">(BaseAdminPlugin)</span>:</span></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_field_style</span><span class="params">(self, attrs, db_field, style, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> style == <span class="string">'ueditor'</span>:</span><br><span class="line">            <span class="keyword">if</span> isinstance(db_field, UEditorField):</span><br><span class="line">                widget = db_field.formfield().widget</span><br><span class="line">                param = &#123;&#125;</span><br><span class="line">                param.update(widget.ueditor_settings)</span><br><span class="line">                param.update(widget.attrs)</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">'widget'</span>: XadminUEditorWidget(**param)&#125;</span><br><span class="line">        <span class="keyword">return</span> attrs</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">block_extrahead</span><span class="params">(self, context, nodes)</span>:</span></span><br><span class="line">        js = <span class="string">'&lt;script type="text/javascript" src="%s"&gt;&lt;/script&gt;'</span> % (settings.STATIC_URL + <span class="string">"ueditor/ueditor.config.js"</span>)         <span class="comment">#自己的静态目录</span></span><br><span class="line">        js += <span class="string">'&lt;script type="text/javascript" src="%s"&gt;&lt;/script&gt;'</span> % (settings.STATIC_URL + <span class="string">"ueditor/ueditor.all.min.js"</span>)   <span class="comment">#自己的静态目录</span></span><br><span class="line">        nodes.append(js)</span><br><span class="line"> </span><br><span class="line">xadmin.site.register_plugin(UeditorPlugin, UpdateAdminView)</span><br><span class="line">xadmin.site.register_plugin(UeditorPlugin, CreateAdminView)</span><br><span class="line">在xadmin/plugins目录下的__init__.py文件中，将ueditor插件注册进去</span><br><span class="line">PLUGINS = (</span><br><span class="line">    <span class="string">'actions'</span>, </span><br><span class="line">    <span class="string">'.......'</span>,</span><br><span class="line">    <span class="string">'ueditor'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>4.</strong>错误修正 </p>
<p><strong>说明：</strong><font style="color:red">DjangoUeditor是基于Python 2.7的进行开发的，博主这里的开发环境为python3，所以需要对DjangoUeditor安装包下的models.py丶settings.py丶widgets.py丶commands.py丶urls.py丶views.py进行修改</font></p>
<ul>
<li>models.py </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from widgets import UEditorWidget,AdminUEditorWidget</span></span><br><span class="line"><span class="keyword">from</span> .widgets <span class="keyword">import</span> UEditorWidget, AdminUEditorWidget</span><br></pre></td></tr></table></figure>

<ul>
<li>settings.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">更新配置：从用户配置文件settings.py重新读入配置UEDITOR_SETTINGS,覆盖默认</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">UpdateUserSettings</span><span class="params">()</span>:</span></span><br><span class="line">    UserSettings=getattr(gSettings,<span class="string">"UEDITOR_SETTINGS"</span>,&#123;&#125;).copy()</span><br><span class="line">    <span class="comment"># if UserSettings.has_key("config"):UEditorSettings.update(UserSettings["config"])</span></span><br><span class="line">    <span class="comment"># if UserSettings.has_key("upload"):UEditorUploadSettings.update(UserSettings["upload"])</span></span><br><span class="line">    <span class="keyword">if</span> UserSettings.get(<span class="string">"config"</span>):UEditorSettings.update(UserSettings[<span class="string">"config"</span>])</span><br><span class="line">    <span class="keyword">if</span> UserSettings.get(<span class="string">"upload"</span>):UEditorUploadSettings.update(UserSettings[<span class="string">"upload"</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>widgets.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import settings as USettings</span></span><br><span class="line"><span class="comment"># from  commands import *</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> settings <span class="keyword">as</span> USettings</span><br><span class="line"><span class="keyword">from</span> .commands <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>

<ul>
<li>commands.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import settings as USettings</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> settings <span class="keyword">as</span> USettings</span><br></pre></td></tr></table></figure>

<ul>
<li>urls.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="comment"># from django import VERSION</span></span><br><span class="line"><span class="comment"># if VERSION[0:2]&gt;(1,3):</span></span><br><span class="line"><span class="comment">#     from django.conf.urls import patterns, url</span></span><br><span class="line"><span class="comment"># else:</span></span><br><span class="line"><span class="comment">#     from django.conf.urls.defaults import patterns, url</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># from views import get_ueditor_controller</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># urlpatterns = patterns('',</span></span><br><span class="line"><span class="comment">#     url(r'^controller/$',get_ueditor_controller)</span></span><br><span class="line"><span class="comment"># )</span></span><br><span class="line"><span class="keyword">from</span> .widgets <span class="keyword">import</span> UEditorWidget, AdminUEditorWidget</span><br><span class="line"><span class="keyword">from</span> .views <span class="keyword">import</span> get_ueditor_controller</span><br><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"> </span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^controller/$'</span>, get_ueditor_controller),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>views.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import settings as USettings</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> settings <span class="keyword">as</span> USettings</span><br><span class="line"> </span><br><span class="line"><span class="comment">#保存上传的文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_upload_file</span><span class="params">(PostFile,FilePath)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        f = open(FilePath, <span class="string">'wb'</span>)</span><br><span class="line">        <span class="keyword">for</span> chunk <span class="keyword">in</span> PostFile.chunks():</span><br><span class="line">            f.write(chunk)</span><br><span class="line">    <span class="comment"># except Exception,E:</span></span><br><span class="line">    <span class="comment">#     f.close()</span></span><br><span class="line">    <span class="comment">#     return u"写入文件错误:"+ E.message</span></span><br><span class="line">    <span class="comment"># f.close()</span></span><br><span class="line">    <span class="comment"># return u"SUCCESS"</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> E:</span><br><span class="line">        f.close()</span><br><span class="line">        <span class="keyword">return</span> <span class="string">u"写入文件错误:"</span>+ E.message</span><br><span class="line">    f.close()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">u"SUCCESS"</span></span><br></pre></td></tr></table></figure>

<ul>
<li>重启项目进入xadmin后台进行增加课程操作时，结果报错了</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516204950643.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>回到编辑器，查看错误位置</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516205039452.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>查看安装包DjangoUeditor中发现并没有ueditor.html，甚至连templates目录都没有</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516205525918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>解决方法有三种</strong>：第一种就是在github上将别人修正好的适合python3的DjangoUeditor源码拷贝进行源码安装；第二种就是自己下载DjangoUeditor免安装源码放在项目extra_apps目录下；第三种就是下载DjangoUeditor源码安装，在对其下的模块进行修正</p>
<ul>
<li>博主选择第三种，将下载好的DjangoUeditor-master.zip进行解压，将解压后的文件放在项目根目录下，具体操作如下</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516214632815.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>完成上一步后，刷新页面则成功在课程详情字段加载出富文本编辑器</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190516214815400.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>添加新的课程使用富文本编辑器</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190519132812572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>查看课程列表，在刚新增的课程详情页中显示全是HTML代码</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190519132844125.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在进入课程详情后，详情页面显示出转义的内容</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190519134243589.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>需要在course-detail模板中找到课程详情数据块，对数据块内容进行转义关闭</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tab_cont tab_cont1"</span>&gt;</span></span><br><span class="line">    &#123;% autoescape off %&#125;</span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; course.detail &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    &#123;% endautoescape %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>刷新页面，成功显示出在富文本编写的内容</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019051913443960.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>5.</strong>总结步骤：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">安装</span><br><span class="line">1.pip install DjangoUeditor</span><br><span class="line">2.settings.py 中加入DjangoUeditor</span><br><span class="line">3.url(r&apos;ueditor/&apos;, include(&apos;DjangoUeditor.urls&apos;))</span><br><span class="line">4.detail = UeditorField()</span><br><span class="line"></span><br><span class="line">xadmin</span><br><span class="line">1.plugins中添加ueditor.py文件，在__init__中加入ueditor</span><br><span class="line">2.adminx中添加style_fields = &#123;&apos;detail&apos;:&apos;ueditor&apos;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="四丶Xadmin插件开发（导出excel）"><a href="#四丶Xadmin插件开发（导出excel）" class="headerlink" title="四丶Xadmin插件开发（导出excel）"></a>四丶Xadmin插件开发（导出excel）</h1><p><strong>说明</strong>：excel的导入插件开发</p>
<p><strong>1.</strong>在xadmin/plugins中创建excel.py文件，拷贝如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import xadmin</span><br><span class="line">from xadmin.views import BaseAdminPlugin, ListAdminView</span><br><span class="line">from django.template import loader</span><br><span class="line">from xadmin.plugins.utils import get_context_dict</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">#excel 导入</span><br><span class="line">class ListImportExcelPlugin(BaseAdminPlugin):</span><br><span class="line">    import_excel = False</span><br><span class="line"> </span><br><span class="line">    def init_request(self, *args, **kwargs):</span><br><span class="line">        return bool(self.import_excel)</span><br><span class="line"> </span><br><span class="line">    def block_top_toolbar(self, context, nodes):</span><br><span class="line">        nodes.append(loader.render_to_string(&apos;xadmin/excel/model_list.top_toolbar.import.html&apos;, context=get_context_dict(context)))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">xadmin.site.register_plugin(ListImportExcelPlugin, ListAdminView)</span><br></pre></td></tr></table></figure>

<p><strong>2.</strong>在xadmin/templates/xadmin目录下创建excel目录，在目录下创建model_list.top_toolbar.import.html文件，文件内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load i18n %&#125;</span><br><span class="line">&lt;div class=&quot;btn-group export&quot;&gt;</span><br><span class="line">  &lt;a class=&quot;dropdown-toggle btn btn-default btn-sm&quot; data-toggle=&quot;dropdown&quot; href=&quot;#&quot;&gt;</span><br><span class="line">    &lt;i class=&quot;icon-share&quot;&gt;&lt;/i&gt; 导入 &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;</span><br><span class="line">  &lt;/a&gt;</span><br><span class="line">  &lt;ul class=&quot;dropdown-menu&quot; role=&quot;menu&quot; aria-labelledby=&quot;dLabel&quot;&gt;</span><br><span class="line">      &lt;li&gt;&lt;a data-toggle=&quot;modal&quot; data-target=&quot;#export-modal-import-excel&quot;&gt;&lt;i class=&quot;icon-circle-arrow-down&quot;&gt;&lt;/i&gt; 导入 Excel&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        function fileChange(target)&#123;</span><br><span class="line">//检测上传文件的类型</span><br><span class="line">            var imgName = document.all.submit_upload.value;</span><br><span class="line">            var ext,idx;</span><br><span class="line">            if (imgName == &apos;&apos;)&#123;</span><br><span class="line">                document.all.submit_upload_b.disabled=true;</span><br><span class="line">                alert(&quot;请选择需要上传的 xls 文件!&quot;);</span><br><span class="line">                return;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                idx = imgName.lastIndexOf(&quot;.&quot;);</span><br><span class="line">                if (idx != -1)&#123;</span><br><span class="line">                    ext = imgName.substr(idx+1).toUpperCase();</span><br><span class="line">                    ext = ext.toLowerCase( );</span><br><span class="line">&#123;#                    alert(&quot;ext=&quot;+ext);#&#125;</span><br><span class="line">                    if (ext != &apos;xls&apos; &amp;&amp; ext != &apos;xlsx&apos;)&#123;</span><br><span class="line">                        document.all.submit_upload_b.disabled=true;</span><br><span class="line">                        alert(&quot;只能上传 .xls 类型的文件!&quot;);</span><br><span class="line"> </span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    document.all.submit_upload_b.disabled=true;</span><br><span class="line">                    alert(&quot;只能上传 .xls 类型的文件!&quot;);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    &lt;div id=&quot;export-modal-import-excel&quot; class=&quot;modal fade&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;modal-dialog&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">          &lt;form method=&quot;post&quot; action=&quot;&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">              &#123;% csrf_token %&#125;</span><br><span class="line">          &lt;div class=&quot;modal-header&quot;&gt;</span><br><span class="line">            &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/button&gt;</span><br><span class="line">            &lt;h4 class=&quot;modal-title&quot;&gt;导入 Excel&lt;/h4&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;modal-body&quot;&gt;</span><br><span class="line">               &lt;input type=&quot;file&quot; οnchange=&quot;fileChange(this)&quot; name=&quot;excel&quot; id=&quot;submit_upload&quot;&gt;</span><br><span class="line"> </span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;modal-footer&quot;&gt;</span><br><span class="line">            &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot; data-dismiss=&quot;modal&quot;&gt;&#123;% trans &quot;Close&quot; %&#125;&lt;/button&gt;</span><br><span class="line">            &lt;button class=&quot;btn btn-success&quot; type=&quot;submit&quot; id=&quot;submit_upload_b&quot;&gt;&lt;i class=&quot;icon-share&quot;&gt;&lt;/i&gt; 导入&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;/form&gt;</span><br><span class="line">        &lt;/div&gt;&lt;!-- /.modal-content --&gt;</span><br><span class="line">      &lt;/div&gt;&lt;!-- /.modal-dalog --&gt;</span><br><span class="line">    &lt;/div&gt;&lt;!-- /.modal --&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><strong>3.</strong>在courses/adminx下的CourseAdmin类中添加import_excel = True属性，并定义一个post方法，在这个方法中可以任意添加任何逻辑代码，这里就不进行逻辑代码的演示了，直接pass，但必须返回如下调用，不然会出错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">'excel'</span> <span class="keyword">in</span> request.FILES:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> super(CourseAdmin, self).post(request, args, kwargs)</span><br></pre></td></tr></table></figure>

<p><strong>4.</strong>在plugins/<strong>init</strong>.py中注册此插件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PLUGINS = (</span><br><span class="line">    <span class="string">'actions'</span>, </span><br><span class="line">    <span class="string">'filters'</span>, </span><br><span class="line">    <span class="string">'bookmark'</span>, </span><br><span class="line">    <span class="string">'export'</span>, </span><br><span class="line">    <span class="string">'ueditor'</span>,</span><br><span class="line">    <span class="string">'excel'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>测试刷新课程列表页，在右上角菜单栏中显示出导入按钮，因为没有写对上传excel文件操作，所以这里只能显示出此功能</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019051915312782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<h1 id="五丶项目部署上线"><a href="#五丶项目部署上线" class="headerlink" title="五丶项目部署上线"></a>五丶项目部署上线</h1><p><strong>1.</strong>指定python3版本创建django_py3虚拟环境，并进入此环境</p>
<p><img src="https://img-blog.csdnimg.cn/20190523105246252.png" alt></p>
<p><strong>2.</strong>安装项目所需的包</p>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523102815441.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>3.</strong>查看当前虚拟环境下的包</p>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523103038921.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>4.</strong>运行项目</p>
<ul>
<li>在终端执行python3 manage.py runserver</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/2019052311280649.png" alt></p>
<ul>
<li>结果报错了，这个错无非就是安装的DjangoUeditor包中源码为python2编写的</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523112639602.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>将windows虚拟环境D:\django_py3\Lib\site-packages下的DjangoUeditor包替换掉ubuntu虚拟环境django_py3/lib/python3.5/site-packages下的DjangoUeditor</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523114219308.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>再次使用命令启动项目，结果又报错了，原因是没有mxonline的数据库</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523114332718.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>5.</strong>将windows上的mxonline数据库数据传输到ubuntu中</p>
<ul>
<li>在ubuntu中创建mxonline数据库 </li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523115521579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>查看ubuntu上的IP地址</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523114838833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>博主这里在使用Navicat软件时，不小心将mxonline数据库数据表数据清空了，所以导致博主需要花大量时间在xadmin后台进行数据的添加，所以博主先将数据库mxonline进行备份，免得再出现该情况</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20190523143018771.png" alt></p>
<ul>
<li>使用Navicat软件测试在windows上测试连接ubuntu中的mysql </li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523122354434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在Windows上打开Navicat软件，通过该软件数据传输功能将mxonline数据库数据传输到ubuntu中的mxonline数据中</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523115929819.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>点击开始后，出现success表示成功</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019052312000254.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>回到ubuntu中，重新启动项目，则启动成功</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523120349518.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>打开浏览器访问成功访问主页并显示动态数据</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523145201680.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>6.</strong>安装nginx</p>
<p><strong>说明：</strong>安装过程不用演示，很简单</p>
<ul>
<li>因博主在之前Django电商项目中已经安装过了所以这里不用安装，并且ngin.conf配置文件中的配置为Django电商项目的配置；在Django电商项目部署配置nginx时，将默认的配置文件进行了备份（nginx.conf.fefault），所以只需要指定该配置文件来启动nginx即可</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523152152788.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在浏览器中直接输入ubuntu IP地址即默认访问80端口，则显示nginx服务启动成功页面</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523152347509.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>7.</strong>安装uwsgi</p>
<ul>
<li>进入虚拟环境中安装uwsgi</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523153335635.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>使用uwsgi启动项目</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523155710986.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在浏览器中输入<a href="http://192.168.4.63:8000/" target="_blank" rel="noopener">http://192.168.4.63:8000/</a> 则成功加载出页面动态数据；但静态资源无法加载出来</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523155815460.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>8.</strong>nginx配置</p>
<ul>
<li>拷贝nginx默认的配置文件到当前目录下并命名为mx_nginx.conf</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523163245339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>编写mx_nginx.conf文件内容，具体如下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  192.168.4.63 www.mxonline.com;</span><br><span class="line"> </span><br><span class="line">        #charset koi8-r;</span><br><span class="line"> </span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line">	location /static &#123;</span><br><span class="line">            alias /home/taogang/Desktop/MxOnline/static;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        location /media &#123;</span><br><span class="line">            alias /home/taogang/Desktop/MxOnline/media;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        location / &#123;</span><br><span class="line">            include   uwsgi_params;</span><br><span class="line">            uwsgi_pass  127.0.0.1:8000;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>指定以上配置文件启动nginx服务器</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523165152468.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>9.</strong>将项目所用到的所有静态资源文件收集到static目录下</p>
<ul>
<li>需要在settings配置文件中配置收集静态文件路径，之前<a href="https://blog.csdn.net/qq_41782425/article/details/89059800#%E5%9B%9B%E4%B8%B6%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2" target="_blank" rel="noopener">Django电商项目</a>也是这样的</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/2019052811044542.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>进入项目虚拟环境，执行命令进行收集</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523171950568.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>10.</strong>创建并配置uwsgi.ini文件</p>
<ul>
<li>在项目根目录下创建一个uwsgi.ini配置文件，编写以下内容</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523203340331.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在配置文件settings中，设置为线上环境</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG = False</span><br><span class="line"> </span><br><span class="line">ALLOWED_HOSTS = [&apos;*&apos;]</span><br></pre></td></tr></table></figure>

<p><strong>11.</strong>测试使用uwsgi启动项目</p>
<ul>
<li>启动uwsgi</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523203743999.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>在浏览器直接访问<a href="http://192.168.4.63/" target="_blank" rel="noopener">http://192.168.4.63/</a> 成功加载动态数据以及静态资源文件</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523203848934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<p><strong>12.</strong>在windows中使用域名访问网站</p>
<ul>
<li>切换到windows中，在浏览器输入<a href="http://192.168.4.63/" target="_blank" rel="noopener">http://192.168.4.63/</a>  成功访问ubuntu中uwsgi启动的网站，之所以能够访问是因为通过vmware虚拟机搭建的ubuntu桥接模式为同一网段ip，即可以互相ping通</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523204208236.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>接下来想要在浏览器地址栏中输入<a href="http://www.mxonline.com域名来访问网站主页，则需要在windows电脑hosts文件中添加如下内容，则表示输入此域名相当于访问192.168.4.63IP地址，因为没有购买域名，所以只能这样做，仅限于本地可以使用该域名访问" target="_blank" rel="noopener">www.mxonline.com域名来访问网站主页，则需要在windows电脑hosts文件中添加如下内容，则表示输入此域名相当于访问192.168.4.63IP地址，因为没有购买域名，所以只能这样做，仅限于本地可以使用该域名访问</a></li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523204943316.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<ul>
<li>测试在浏览器中输入<a href="http://www.mxonline.com/" target="_blank" rel="noopener">http://www.mxonline.com/</a> 是否成功访问主页</li>
</ul>
<p><fancybox><img src="https://img-blog.csdnimg.cn/20190523205219328.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNzgyNDI1,size_16,color_FFFFFF,t_70" alt></fancybox></p>
<h1 id="六丶项目总结"><a href="#六丶项目总结" class="headerlink" title="六丶项目总结"></a>六丶项目总结</h1><p><strong>1.数据库设计</strong></p>
<ul>
<li>users app model用户信息相关数据表设计</li>
<li>organization app model课程机构数据表设计</li>
<li>courses app model课程相关数据表设计</li>
<li>operation app model用户操作相关数据表设计</li>
</ul>
<p><strong>2.后台管理系统开发</strong></p>
<ul>
<li>xadmin安装以及model注册</li>
<li>xadmin全局配置</li>
</ul>
<p><strong>3.登录和注册以及找回密码</strong></p>
<ul>
<li>登录(session和cookie机制)</li>
<li>注册(form表单提交和图片验证码以及发送邮件)</li>
<li>找回密码(邮件发送)</li>
</ul>
<p><strong>4.课程机构</strong></p>
<ul>
<li>机构列表(分页和筛选以及排序)</li>
<li>机构详情(收藏和富文本编辑)</li>
<li>咨询提交(modelform验证和保存)</li>
</ul>
<p><strong>5.课程功能</strong></p>
<ul>
<li>课程列表(分页和排序)</li>
<li>课程详情(收藏丶章节展示丶资源展示丶评论)</li>
</ul>
<p><strong>6.讲师功能</strong></p>
<ul>
<li>讲师列表(分页和排序)</li>
<li>讲师详情(收藏)</li>
</ul>
<p><strong>7.个人中心</strong></p>
<ul>
<li>用户信息修改(修改密码丶头像丶邮箱丶基本信息)</li>
<li>我的课程</li>
<li>我的收藏(取消收藏)</li>
<li>我的消息</li>
</ul>
<p><strong>8.全局功能</strong></p>
<ul>
<li>搜索功能(公开课丶课程机构丶授课老师)</li>
<li>全局404和500页面配置</li>
<li>首页开发</li>
<li>点击数和收藏数修改以及退出功能</li>
</ul>
<p><strong>9.web攻击及防范</strong></p>
<ul>
<li>sql注入攻击</li>
<li>xss攻击</li>
<li>csrf攻击</li>
</ul>
<p><strong>10.xadmin进阶开发</strong></p>
<ul>
<li>userprofile注册和设置</li>
<li>xadmin常见功能设置</li>
<li>inlinemode注册和proxy代理注册</li>
<li>django ueditor富文本编辑器集成</li>
<li>excel导入插件集成</li>
</ul>
<br>

<p>————————————————<br>版权声明：本文为CSDN博主「cdtaogang」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/qq_41782425/article/details/90243762" target="_blank" rel="noopener">https://blog.csdn.net/qq_41782425/article/details/90243762</a></p>

      </div>
      
        <br>
        


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-11-16T09:58:46+08:00">
  <a class='notlink'>
    <i class="fas fa-clock" aria-hidden="true"></i>
    <p>更新于 2019年11月16日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Python/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i><p>Python</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Django/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i><p>Django</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Django网站实战/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i><p>Django网站实战</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Python-Web开发/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i><p>Python Web开发</p></a></div>


        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="QQ好友" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=https://hellotaogang.github.io/2019/11/15/Django项目于之在线教育平台网站的实战开发（完结）/&title=Django项目于之在线教育平台网站的实战开发（完结） | TG'S BLOG&summary=该篇文章是博主一字一码编写的，实属不易，请尊重原创，谢谢大家！温馨提示：需要项目源码的朋友，请添加博主微信进行获取！
&nbsp;&nbsp;本文目录
一丶常见web攻击及防范
二丶Xadmin多种配置
三丶Xadmin插件开发（富文本编辑器）
四丶Xadmin插件开发（导出excel）
五丶项目部署上线
六丶项目总结"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="QQ空间" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://hellotaogang.github.io/2019/11/15/Django项目于之在线教育平台网站的实战开发（完结）/&title=Django项目于之在线教育平台网站的实战开发（完结） | TG'S BLOG&summary=该篇文章是博主一字一码编写的，实属不易，请尊重原创，谢谢大家！温馨提示：需要项目源码的朋友，请添加博主微信进行获取！
&nbsp;&nbsp;本文目录
一丶常见web攻击及防范
二丶Xadmin多种配置
三丶Xadmin插件开发（富文本编辑器）
四丶Xadmin插件开发（导出excel）
五丶项目部署上线
六丶项目总结"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class='qrcode' rel="external nofollow noopener noreferrer" href='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAAD7klEQVR42u3ay07jQBAF0Pz/T4M0KySIc29VOzDS8QpZpNt9vCjX4/GIr49/1/c7X6/r/3/22+s1v/5Pu+b1/68uHDhw4MARHDV/lOtjbO7kT7XZ6/pF4sCBAweOUxzXwTUJYPnj5gEyfz3JneQDAgcOHDhwvJOj3bg9WJsi5mkkDhw4cOD4mxxJufBsqW5fgsSBAwcOHL/FkRfgikJbHKTbQuSmgHisVooDBw4cOK6euRho+B//vnG+AwcOHDhwlEMDswC2Sc/yI7WlwxcnwoEDBw4ca45k4CA/UlJ6S3YZFvUudywCMA4cOHDgWHPMRhb2w3DtysnB8jGIuvmEAwcOHDhijvZneatpNpowW39T1qxjNQ4cOHDguAyu+Z1WesY6C/Oz1PGHWikOHDhw4LiBI7///oJgzlcP5+HAgQMHjqMcbQEuT+rylTfFxOSF4cCBAweOuzlmAw2z4blZQygJ1W2aF5UIceDAgQPHmmNTEEyOnaO0yWFeHIyGMHDgwIEDx5pj/ygbpn3rqP0UiMYmcODAgQPHiCM/RhtQk2SpDX6bdlQ0DIEDBw4cOA5xJBB5uM0TubOtptkoww9dOBw4cODAseCYpUN5mpc3gVq4HLcuC+LAgQMHjjXH0KkcNZiV9mYjcbNdcODAgQPHnmMWApOwN2tKbV5D3WfLM1ocOHDgwFFmW/lR6xheJmNt8yk/ZNHKwoEDBw4cC45Zq6Y9dh6YkyRwv/6LsiAOHDhw4FhztL2pJFXbX0m7qDhqQowDBw4cOI5ynN1y9tvZgEJbpnwxOYgDBw4cOA5xtIF2kzJdrzAboZgVCo99d+DAgQMHjiccSdnu7Dj1gWPE4w4vng0HDhw4cKw5ZqW6NpS2xMkKebEyaafhwIEDB447OJK0qiXYHzgv+W2SPRw4cODAcQfH2bGD/Lf7IYbNQAYOHDhw4LiDow1syWPNKNswmYfbIovFgQMHDhxrjtmowccNVz4AkZT89sMTOHDgwIGj5dg0ZvJEKwmBbVp4djwCBw4cOHDcx7EZTZuNIOwbUccaXThw4MCB4xBHUrxrA1ueROW7bEqTyYcCDhw4cODYc+RL35GG5U2pFqXd5dF+BeDAgQMHjiccs7bQpkGVB9FTIxFF0RAHDhw4cKw5ZgEpT8P20xaz1zN7YThw4MCB4xRHO762OVIbCGfBfhVoceDAgQPHIY48uJ5q/LTFwaT4mOzyImnEgQMHDhy/xJEfNQ+o17vnZcTZaB0OHDhw4Hg/R57mnUoON02s4ZgFDhw4cOA4xJE3kGZFvbxxdV8qGK2AAwcOHDjWHPuBhlPJWN5eal9h/iQ4cODAgWPB8Ql03ipcH94iGQAAAABJRU5ErkJggg=='>
        
          <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/wechat.png">
        
        </a>
      
    
      
        <a class="-mob-share-weibo" title="微博" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=https://hellotaogang.github.io/2019/11/15/Django项目于之在线教育平台网站的实战开发（完结）/&title=Django项目于之在线教育平台网站的实战开发（完结） | TG'S BLOG&summary=该篇文章是博主一字一码编写的，实属不易，请尊重原创，谢谢大家！温馨提示：需要项目源码的朋友，请添加博主微信进行获取！
&nbsp;&nbsp;本文目录
一丶常见web攻击及防范
二丶Xadmin多种配置
三丶Xadmin插件开发（富文本编辑器）
四丶Xadmin插件开发（导出excel）
五丶项目部署上线
六丶项目总结"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


      
      
          <div class="prev-next">
              
                  <section class="prev">
                      <span class="art-item-left">
                          <h6><i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;上一页</h6>
                          <h4>
                              <a href="/2019/11/16/Django与Elasticsearch交互打造搜索引擎网站（一）/" rel="prev" title="Django与Elasticsearch交互打造搜索引擎网站（一）">
                                
                                    Django与Elasticsearch交互打造搜索引擎网站（一）
                                
                              </a>
                          </h4>
                          
                              
                              <h6 class="tags">
                                  <a class="tag" href="/tags/ElasticSearch/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> ElasticSearch</a> <a class="tag" href="/tags/Python-Scrapy分布式爬虫/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> Python Scrapy分布式爬虫</a> <a class="tag" href="/tags/数据抓取/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> 数据抓取</a> <a class="tag" href="/tags/Django-网站搭建/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> Django 网站搭建</a>
                              </h6>
                          
                      </span>
                  </section>
              
              
                  <section class="next">
                      <span class="art-item-right" aria-hidden="true">
                          <h6>下一页&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i></h6>
                          <h4>
                              <a href="/2019/11/15/Django项目于之在线教育平台网站的实战开发（五）/" rel="prev" title="Django项目于之在线教育平台网站的实战开发（五）">
                                  
                                      Django项目于之在线教育平台网站的实战开发（五）
                                  
                              </a>
                          </h4>
                          
                              
                              <h6 class="tags">
                                  <a class="tag" href="/tags/Python/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> Python</a> <a class="tag" href="/tags/Django/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> Django</a> <a class="tag" href="/tags/Django网站实战/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> Django网站实战</a> <a class="tag" href="/tags/Python-Web开发/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> Python Web开发</a>
                              </h6>
                          
                      </span>
                  </section>
              
          </div>
      
    </section>
  </article>



  <!-- 显示推荐文章和评论 -->



  <article class="post white-box comments">
    <section class="article typo">
      <h4><i class="fas fa-comments fa-fw" aria-hidden="true"></i>&nbsp;评论</h4>
      
      
      
        <section id="comments">
          <div id="gitalk-container"></div>
        </section>
      
      
    </section>
  </article>






<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->



  <script>
    window.subData = {
      title: 'Django项目于之在线教育平台网站的实战开发（完结）',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
    
    
      
        
          
          
        
          
          
            
              
  <section class='widget toc-wrapper'>
    
<header class='pure'>
  <div><i class="fas fa-list fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;本文目录</div>
  
    <!-- <div class='wrapper'><a class="s-toc rightBtn" rel="external nofollow noopener noreferrer" href="javascript:void(0)"><i class="fas fa-thumbtack fa-fw"></i></a></div> -->
  
</header>

    <div class='content pure'>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一丶常见web攻击及防范"><span class="toc-text">一丶常见web攻击及防范</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二丶Xadmin多种配置"><span class="toc-text">二丶Xadmin多种配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三丶Xadmin插件开发（富文本编辑器）"><span class="toc-text">三丶Xadmin插件开发（富文本编辑器）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四丶Xadmin插件开发（导出excel）"><span class="toc-text">四丶Xadmin插件开发（导出excel）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#五丶项目部署上线"><span class="toc-text">五丶项目部署上线</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#六丶项目总结"><span class="toc-text">六丶项目总结</span></a></li></ol>
    </div>
  </section>


            
          
        
          
          
        
          
          
        
          
          
        
          
          
        
          
          
        
      
    

  
</aside>

<footer id="footer" class="clearfix">
  
  
    <div class="social-wrapper">
      
        
          <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1126331350&amp;site=qq&amp;menu=yes"
            class="social fab fa-qq flat-btn flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.4/about/wxhy.png"
            class="social fab fa-weixin flat-btn flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=cdtaogang@163.com"
            class="social fas fa-envelope flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://github.com/Hellotaogang"
            class="social fab fa-github flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://blog.csdn.net/qq_41782425"
            class="social fab fa-cuttlefish flat-btn flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
    </div>
  
  <br>
  <div><p>Copyright <i class='far fa-copyright'></i> 2019-2020 <a style='color: #333333' href='https://www.cdtaogang.top/' target='_blank'>TG’BLOG</a>&nbsp;&nbsp;|&nbsp;&nbsp;<span id='timeDate'>载入天数…</span><span id='times'>载入时分秒…</span></p>
</div>
  <br>
  <div>
    <div class='github-badge'> <a style='color: #fff' href='https://hexo.io/'><span class='badge-subject'>框架</span><span class='badge-value bg-blue'>Hexo</span></a> </div> <div class='github-badge'> <a style='color: #fff' href='https://github.com/'><span class='badge-subject'>托管</span><span class='badge-value bg-brightgreen'>GitHub</span></a> </div> <div class='github-badge'> <a style='color: #fff' href='https://www.aliyun.com/'><span class='badge-subject'>域名</span><span class='badge-value bg-firebrick'>Aliyun</span></a> </div> <div class='github-badge'> <a style='color: #fff' href='https://www.jsdelivr.com/'><span class='badge-subject'>内容分发网络</span><span class='badge-value bg-orange'>jsDelivr</span></a> </div> <div class='github-badge'> <a style='color: #fff' href='https://996.icu/#/zh_CN'><span class='badge-subject'>链接</span><span class='badge-value bg-red'>996.ICU</span></a> </div> <div class='github-badge'> <a style='color: #fff' href='https://xaoxuu.com/wiki/material-x/'><span class='badge-subject'>主题</span><span class='badge-value bg-blue'>Material X</span></a> </div> <div class='github-badge'> <a style='color: #fff' href='https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh'><span class='badge-subject'>协议</span><span class='badge-value bg-pink'>BY-NC-SA 4.0</span></a> </div>
  </div>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("10/11/2019 21:38:00");//在此处修改你的建站时间
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",250);
</script>
</footer>
<script>setLoadingBarProgress(80);</script>



      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>

<script src="//instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>


  <script async src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      const $reveal = $('.reveal');
      if ($reveal.length === 0) return;
      const sr = ScrollReveal({ distance: 0 });
      sr.reveal('.reveal');
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>




  
  
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>
    <script type="text/javascript">
      $(function(){
        if ('.cover') {
          $('.cover').backstretch(
          ["https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.5.7/images/background_4.jpg", "https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.5.7/images/background_5.jpg", "https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.5.7/images/background_6.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        } else {
          $.backstretch(
          ["https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.5.7/images/background_4.jpg", "https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.5.7/images/background_5.jpg", "https://cdn.jsdelivr.net/gh/Hellotaogang/cdn@4.5.7/images/background_6.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        }
      });
    </script>
  







  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: "71020b6958cd6bbf65b7",
      clientSecret: "3cfeccd9125b8bac76f2bd8a7f6e30a601ae3a81",
      repo: "Hellotaogang.github.io",
      owner: "Hellotaogang",
      admin: "Hellotaogang",
      
        id: md5(location.pathname),      // Ensure uniqueness and length less than 50
      
      distractionFreeMode: false  // Facebook-like distraction free mode
    });
    gitalk.render('gitalk-container');
  </script>





  <script src="/js/app.js"></script>


  <script src="/js/search.js"></script>




<!-- 复制 -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  let COPY_SUCCESS = "复制成功";
  let COPY_FAILURE = "复制失败";
  /*页面载入完成后，创建复制按钮*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //您可以加入成功提示
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //您可以加入失败提示
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * 弹出式提示框，默认1.5秒自动消失
   * @param message 提示信息
   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info
   * @param time 消失时间
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // 成功提示
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // 失败提示
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // 提醒
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // 信息提示
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };

</script>


<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>





  <script>setLoadingBarProgress(100);</script>
  <!-- 页面点击小红心 -->
  <!-- <script type="text/javascript" src="/js/love.js"></script> -->
  <!--单击显示文字-->
  <!-- <script type="text/javascript" src="/js/click_show_text.js"></script> -->
  <!-- 鼠标点击烟花 -->
  <!-- <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
  <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
  <script type="text/javascript" src="/js/fireworks.js"></script> -->
  <!--浏览器搞笑标题-->
  <script type="text/javascript" src="\js\FunnyTitle.js"></script>
  <!--动态线条背景-->
  <script type="text/javascript"
color="0,0,0" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
  </script>
  <!-- 样式一（鼠标点击更换样式） -->
<!-- <script src="https://g.joyinshare.com/hc/ribbon.min.js" type="text/javascript"></script> -->
<!-- 样式二（飘动的彩带） -->
<!-- <script src="https://g.joyinshare.com/hc/piao.js" type="text/javascript"></script> -->
  <!-- 数字雨 -->
  <!-- <canvas id="canvas" width="1440" height="900" ></canvas>
  <script type="text/javascript" src="/js/DigitalRain.js"></script> -->
</body>
</html>
